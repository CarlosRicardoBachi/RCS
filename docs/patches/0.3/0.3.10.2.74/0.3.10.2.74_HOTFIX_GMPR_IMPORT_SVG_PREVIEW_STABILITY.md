# 0.3.10.2.74 — HOTFIX GMPR import (Base SVG visible + Raster align) + SVG insert stability

**Fecha:** 2026-02-07  
**Tipo:** HOTFIX (P0, corrección de regresiones que rompen importación GMPR y preview/insert de SVG)

## Síntomas corregidos

1) **Al importar GMPR no se veía el SVG base embebido**, quedaba solo el raster → imposible validar alineación.
2) **Crash al insertar SVG desde biblioteca**:
   - `AttributeError: 'CanvasView' object has no attribute '_render_svg_qt'`
3) **GMPR import roto por archivo corrupto**:
   - `SyntaxError: 'return' outside function` en `rcs/core/gmpr_io.py`

## Causa

- Archivos críticos (`canvas_view.py` y `gmpr_io.py`) quedaron en un estado inconsistente (métodos fuera de clase / cortes de bloque), lo que rompió:
  - el renderer Qt del preview de SVG,
  - y la lectura/conversión de transforms GMPR.

## Qué cambia

- Se **restaura** el renderer interno del SVG (`CanvasView._render_svg_qt`) usado por:
  - preview de biblioteca,
  - preview del SVG base embebido en GMPR.
- Se **restaura** `gmpr_to_project()` y conversores GMPR:
  - extracción de `svg_embedded` (gzip+base64) → SVG temporal (`Project.gmpr_svg_tmp_path`)
  - inferencia canvas (mm) desde SVG
  - conversión de raster transform GMPR:
    - x/y en unidades SVG → mm (por viewBox/size)
    - sx/sy interpretado como **units-per-px** → se convierte a `scale_x/scale_y` interno (base mm/px a 96DPI)

## Archivos incluidos

- `rcs/ui/canvas_view.py`
- `rcs/core/gmpr_io.py`
- `rcs/core/version.py`
- `docs/patches/index.md`
- `docs/CHANGELOG.md`
- `docs/patches/0.3/0.3.10.2.74/0.3.10.2.74_HOTFIX_GMPR_IMPORT_SVG_PREVIEW_STABILITY.md`
- `docs/checklist/0.3.10.2.74_CHECKLIST.md`

## Checklist de prueba

Ver: `docs/checklist/0.3.10.2.74_CHECKLIST.md`
