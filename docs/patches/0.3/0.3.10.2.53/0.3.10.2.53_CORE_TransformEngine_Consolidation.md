# RCS 0.3.10.2.53 — CORE: Transform Engine (consolidación)

## Objetivo
Reducir duplicación y drift en transformaciones (move/rotate/scale) consolidando:
- Sync de posición item↔modelo (scene → canvas coords).
- Escalado en grupo alrededor de pivot (aplica a handles y a “pegar tamaño”).

## Cambios
- Nuevo helper `CanvasView._sync_item_pos_to_model()`:
  - Único punto para sincronizar `obj.transform.x/y` desde `it.pos()` (scene coords → canvas coords).
  - Reutilizado por `_set_item_center()` y `_lock_item_center()`.

- Nuevo helper `CanvasView._apply_group_scale_about_pivot()`:
  - Escala una lista de items alrededor de un pivot en scene coords.
  - Soporta:
    - `mode="absolute"` (desde snapshot base: evita acumulación durante drag).
    - `mode="multiply"` (multiplica escala actual: usado en “pegar tamaño”).
  - Reutilizado por:
    - Drag de handles (ToolMode.SCALE).
    - `apply_size_to_selection_mm()` (escalado de grupo real con pivot).

## Expectativa
No debería cambiar la UX ni atajos. Es un refactor interno para mantener el comportamiento estable y minimizar divergencias entre caminos de código.

## Riesgos
- Cualquier bug aquí se manifestaría como:
  - Escalado que “salta” o se deforma en multi-selección.
  - Posición final incorrecta al finalizar drag.
  - SVG preview que no se rerenderiza tras escala (solo si se rompe el loop).

## Pruebas recomendadas
Ver `docs/checklist/CHECKLIST_0.3.10.2.53_CORE_TransformEngine.md`.
