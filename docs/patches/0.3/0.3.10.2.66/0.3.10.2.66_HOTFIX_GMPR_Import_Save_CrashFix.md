# 0.3.10.2.66 — HOTFIX GMPR Import/Save (CrashFix)

## Objetivo

Restaurar el flujo GMPR básico **sin crashes**:
- Importar GMPR desde UI.
- Ver rasters importados con transform correcto.
- Guardar GMPR sin que la UI se rompa por retorno inesperado.

## Cambios

### UI

- `MainWindow.action_import_gmpr()` ahora:
  - Carga el bundle con `load_gmpr_json(Path(fp))`.
  - Invoca `gmpr_to_project(bundle, gmpr_path=Path(fp))`.
  - Elimina el uso del kwarg inexistente `file_path`.

### Core (GMPR)

- `gmpr_to_project()`:
  - Construye el `Transform` del raster usando **un único conversor**: `_gmpr_raster_transform_to_rcs_transform()`.
  - Evita el crash por `transform=tr` no definido.
- `update_gmpr_bundle_from_project()`:
  - Centraliza la escritura del dict `raster_meta.transform` y actualiza usando `_update_gmpr_raster_transform_dict()`
    para mantener coherentes `sx/sy` (mm/px) y `s` (factor).
- `save_gmpr_project()` retorna `Path` (como espera la UI al hacer `p.name`).

## Riesgo / compat

- Riesgo bajo: cambios acotados a import/export GMPR (sin tocar CanvasView).
- Compat: se preserva el schema del JSON (no se reestructura el bundle).

## Archivos modificados

- `rcs/ui/main_window.py`
- `rcs/core/gmpr_io.py`
- `rcs/core/version.py`
- `docs/patches/index.md`
- `docs/CHANGELOG.md`
- `docs/patches/0.3/0.3.10.2.66/0.3.10.2.66_HOTFIX_GMPR_Import_Save_CrashFix.md`
- `docs/checklist/CHECKLIST_0.3.10.2.66_HOTFIX_GMPR_Import_Save_CrashFix.md`

