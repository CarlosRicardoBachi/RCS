# RCS 0.3.10.2.69 — HOTFIX GMPR Base SVG (preview a escala + selección exclusiva)

Fecha: 2026-02-05

## Problema

Al importar un `.gmpr`:

- El SVG base embebido se renderizaba con el render “preview” (240px), por lo que quedaba fuera de escala del lienzo.
  Resultado: el/los rasters importados quedaban visualmente desalineados respecto del SVG.
- El SVG base no era seleccionable, dificultando inspección (bbox) y verificación rápida.

## Solución

- Se agregó un render dedicado para el SVG base de GMPR a **escala real** (mm), tomando `project.canvas_mm` y `mm_per_px`.
- Se añadió un clamp para evitar imágenes gigantes: `RCS_GMPR_BASE_MAX_PX` (default 4096).
- El SVG base ahora permite selección por click, pero es **selección exclusiva**:
  - Si hay otros objetos seleccionados, el fondo se deselecciona automáticamente (evita contaminar scale/rotate/bbox).

## Notas

- El SVG base sigue siendo un *preview* (no se integra al modelo `objects[]` en este hotfix).
- No cambia el guardado de GMPR en este parche.

## Archivos tocados

- `rcs/ui/canvas_view.py`
- `rcs/core/version.py`
- `docs/patches/index.md`
- `docs/CHANGELOG.md`
- `docs/patches/0.3/0.3.10.2.69/0.3.10.2.69_HOTFIX_GMPR_BaseSVG_Scale_Selectable.md`
- `docs/checklist/CHECKLIST_0.3.10.2.69_HOTFIX_GMPR_BaseSVG_Scale_Selectable.md`

## Pruebas manuales

1. `python -m rcs.app` debe mostrar `v0.3.10.2.69`.
2. Archivo → Importar GMPR…
   - El SVG base debe verse en escala real del lienzo.
   - Raster/s deben verse alineados con el SVG (misma referencia de origen).
3. Click en “vacío” del lienzo:
   - Selecciona el SVG base (solo para inspección).
4. Selección de raster (click o rubberband):
   - El SVG base **no** debe quedar seleccionado junto a objetos.
