# 0.3.10.2.45 ‚Äî UX+UI: Biblioteca auto-watch + Ajustar tama√±o (mm)

## Objetivo

1) **Biblioteca**: si edit√°s/cre√°s SVGs afuera (Explorer/InkScape/etc), que el panel se entere solo y refresque sin que tengas que apretar üîÑ cada vez.

2) **Lienzo**: al escalar, ya ten√©s la cota amarilla; ahora sumamos un ‚Äúset exacto‚Äù:
**Ajustar tama√±o de imagen** ‚Üí ingres√°s ancho/alto en **mm** (con opci√≥n de mantener relaci√≥n de aspecto) y aplica escala al objeto seleccionado.

---

## Cambios

### 1) Biblioteca: auto-watch con debounce

- Se agrega `QFileSystemWatcher` + `QTimer` single-shot.
- Se observan:
  - el **root** de componentes (cambios estructurales: carpetas/archivos),
  - la **carpeta actual** (cambios frecuentes: editar SVGs).
- Estrategia de refresh:
  - si el evento viene de la carpeta actual ‚Üí **recarga thumbs** (r√°pido),
  - si viene del root/otro ‚Üí **rebuild del √°rbol** (best-effort manteniendo selecci√≥n/carpeta).

Nota: el üîÑ sigue existiendo; el watcher solo automatiza lo obvio.

### 2) Acci√≥n: ‚ÄúAjustar tama√±o de imagen‚Äù (mm)

- Nuevo bot√≥n/acci√≥n en el grupo de herramientas (columna izquierda):
  - **Ajustar tama√±o de imagen**
- Abre di√°logo con:
  - Ancho (mm)
  - Alto (mm)
  - Checkbox **Mantener relaci√≥n de aspecto**
- Al aceptar:
  - actualiza `transform.scale_x/scale_y` del objeto seleccionado
  - re-renderiza preview SVG si corresponde
  - dispara la cota amarilla de tama√±o por ~2s (feedback inmediato)

---

## Archivos tocados

- `rcs/ui/library_panel.py`
- `rcs/ui/main_window.py`
- `rcs/ui/canvas_view.py`
- `rcs/ui/image_size_dialog.py` (nuevo)
- `docs/CHANGELOG.md`
- `docs/patches/index.md`

---

## DoD (Definition of Done)

- Cambiar un SVG en la carpeta actual y ver que:
  - las miniaturas se regeneran (mtime ‚Üí cache bust) sin tocar üîÑ.
- Crear/eliminar un SVG o carpeta y ver que:
  - el √°rbol se reconstruye best-effort.
- Seleccionar un objeto ‚Üí **Ajustar tama√±o de imagen**:
  - aplicar medidas en mm,
  - mantener aspecto funciona,
  - la cota amarilla refleja el nuevo tama√±o.

