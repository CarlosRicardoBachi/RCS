# 0.3.10.2.39 — CORE — Render/Geom Phase 1d: BBox Align to QtSvg Viewport

## Problema observado
El harness (`python -m rcs.svg.render_debug`) comparaba:
- **bbox de QtSvg** (extraído por alpha bbox en la imagen raster `render_px×render_px`)
vs
- **bbox de svgelements** (geom)

En varios SVGs, la comparación daba **FAIL masivo con errores ~200px** en todos los archivos.
Eso no huele a “casos individuales rotos”; huele a **desalineación sistemática de coordenadas**:
svgelements y QtSvg no siempre están midiendo en el mismo “espacio” (viewBox vs viewport, mm→px, escalado al target, etc.).

Resultado: el reporte perdía utilidad (todo FAIL, sin señal real).

## Solución (debug-only)
Se agrega un paso de **alineación** de bbox geométrico al viewport de QtSvg:

1. Se recogen metadatos extra desde svgelements:
   - `doc_size` (ancho/alto)
   - `viewbox`
2. Se generan varios candidatos de mapeo afín (escala+traslación) hacia el target `render_px`:
   - usando `viewbox` de QtSvg (keep/stretch)
   - usando `viewbox` de svgelements (keep/stretch)
   - usando `doc_size` de svgelements (keep/stretch)
   - y el candidato `raw` (sin transformar)
3. Se **scorea** cada candidato contra el bbox observado por alpha y se elige el de menor error.

Todo esto vive en tooling; no toca runtime ni rendering de la app.

## Qué cambia
- Nuevo módulo: `rcs/geom/bbox_align.py`
  - `align_geom_bbox_to_qt(...)` devuelve:
    - `geom_bbox_xyxy` alineado
    - `geom_align` con candidato elegido + transform y ranking
- `rcs/geom/svgelements_bbox.py`
  - ahora expone `doc_size` y `viewbox` además del `bbox`.
- `rcs/svg/render_debug.py`
  - aplica la alineación antes de comparar
  - el reporte `_bbox_report.json` incluye `geom_align`
  - el log imprime `align=<kind>` cuando no es `raw`.

## DoD
- En un set de SVGs donde antes todo era FAIL ~200px:
  - el reporte deja de ser “todo FAIL” por escala/offset,
  - y los FAIL restantes reflejan casos reales (geom vs raster/stroke/invisibilidad).
- `_bbox_report.json` incluye `geom_align.chosen` y `geom_align.candidates`.

