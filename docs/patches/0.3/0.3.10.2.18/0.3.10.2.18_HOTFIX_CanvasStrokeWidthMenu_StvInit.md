# Patch Note — 0.3.10.2.18 (HOTFIX) — Canvas stroke width + crash

## Objetivo
- Corregir crash al insertar SVG: `UnboundLocalError: st_v` en `CanvasView._render_svg_preview_pixmap`.
- Hacer que **Ver → Vista previa → Grosor de línea** realmente controle el **ancho de línea del SVG en el canvas**.
- No tocar thumbnails (miniaturas) ni su pipeline.

## Contexto técnico
En 0.3.10.2.16 se agregó un override de `stroke-width` **solo para preview del canvas** inyectando un `<style id="rcs-preview-style">` en memoria.
El crash ocurría porque `st_v` se usaba antes de asignarse, y además faltaba una conversión coherente a píxeles físicos (DPR).

## Cambios
### 1) `rcs/ui/canvas_view.py`
- Inicializa `st_v`/`ot_v` antes de usarlos.
- Convierte `stroke_thick`/`outline_thick` (px lógicos) → `stroke_px`/`outline_px` (px físicos por DPR).
- Pasa `stroke_px` a `_render_svg_qt(..., stroke_px=stroke_px)` para que el renderer aplique el `stroke-width` forzado.
- Mantiene el halo (`outline`) como post-proceso con `_stylize_preview_image` (sin afectar el stroke real).

### 2) `rcs/core/version.py`
- Bump de versión a `0.3.10.2.18` (sin cambios de schema).

## DoD
- [ ] `python -m rcs.app` abre sin traceback.
- [ ] Doble click en SVG de biblioteca inserta en canvas sin error.
- [ ] Menú **Ver → Vista previa → Grosor de línea** cambia el ancho del trazo del SVG en el canvas (visible).
- [ ] Menú **Ver → Vista previa → Contorno** sigue regulando el halo (outline).
- [ ] Miniaturas quedan igual que en 0.3.10.2.12 (no degradación).

## Nota
Si no ves cambios al variar el grosor, probá con un SVG que tenga `stroke` explícito (algunos assets pueden ser solo `fill`).
