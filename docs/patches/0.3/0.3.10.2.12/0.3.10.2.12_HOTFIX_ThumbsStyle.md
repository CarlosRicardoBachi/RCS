# 0.3.10.2.12 — HOTFIX — Thumbs: estilo consistente (sin engorde acumulativo) + cache bump

## Problema
En miniaturas (Biblioteca) se veían **líneas extra gordas** y, en algunos SVG, una sensación de “deformación”.
El lienzo (canvas) podía verse correcto, pero los thumbs quedaban “pasados de tinta”.

Causas típicas:
- El algoritmo de `preview_style` **mutaba el alfa in-place** y luego reutilizaba ese alfa para el contorno,
  acumulando grosor (stroke + outline) más de lo esperado.
- En thumbs, los defaults de grosor/contorno eran demasiado agresivos para 64px.

## Qué cambia
1) `rcs.svg.preview_style`:
- `dilate_alpha()` ya **no muta** el `QImage` de entrada (copia interna).
- El contorno se calcula con dilatación total **sobre el alfa base**: `stroke + outline`.
  (Antes se dilataba el stroke y luego se volvía a dilatar, inflando doble.)

2) Thumbs (por defecto):
- `stroke_thick=0`, `outline_thick=0` (solo miniaturas).  
  El canvas conserva su estilo/engorde como estaba.

3) Cache:
- Bump interno `CACHE_IMPL_TAG = "thumbs-impl-v3"` en `rcs.svg.thumbs`
  para **forzar regeneración** sin pedirle al usuario borrar carpetas.

## Cómo probar (rápido)
1) Ver versión:
```bat
python -c "from rcs.core.version import APP_VERSION; print(APP_VERSION)"
```
Debe imprimir: `0.3.10.2.12`

2) Forzar regeneración visual:
- Abrí RCS, esperá que carguen las miniaturas.
- Si alguna todavía se ve rara, cerrá RCS y borrá cache manual (opcional):
```bat
rmdir /s /q "%USERPROFILE%\.rcs_cache\thumbs"
```

3) Ajustes por proyecto (rcs_settings.json):
- Editá `rcs_settings.json` y tocá:
  - `preview.thumbs.stroke_thick`
  - `preview.thumbs.outline_thick`
  - `preview.thumbs.size_px`
  - `preview.zoom.default` (si ya estaba habilitado)

Reiniciá RCS para ver el efecto.

## Definition of Done
- [ ] Canvas sigue insertando SVG sin errores.
- [ ] Thumbs: no hay “engorde” exagerado con defaults (0/0).
- [ ] Thumbs: relación de aspecto preservada (sin estirar).
- [ ] Cambiar `preview.thumbs.*` en `rcs_settings.json` impacta al reiniciar.
- [ ] No se introduce dependencia nueva.

## Archivos tocados
- `rcs/svg/preview_style.py`
- `rcs/svg/thumbs.py`
- `rcs_settings.json`
- `rcs/core/version.py`
- `docs/CHANGELOG.md`
- `docs/patches/index.md`
- `ai/context.json`
