# 0.3.10.2.51 — HOTFIX/UI: Size Paste (Group Scaling) + TextToolPanel v1

## Problema
1) **Set/Paste Size** no respetaba el tamaño real de la selección cuando había **múltiples items**. Se recalculaba por item y la segunda pasada “rompía” el tamaño global.
2) El clipboard interno podía contener valores inválidos (ej. `True/False`, `None`, `NaN/Inf`, `<=0`) y eso disparaba escalados absurdos o errores.
3) El panel de texto era un placeholder mínimo: preview 1-línea y sin metadatos útiles.

## Qué cambió
### A) Size Paste / Set Size (CanvasView)
- La medición usa `sceneBoundingRect()` (lo visible, incluyendo rotación).
- La selección múltiple se escala como **grupo real**:
  - bbox unido (`united`) de la selección
  - pivot en el **centro del bbox**
  - cada objeto:
    - escala (actualizando `transform.scale_x/scale_y`)
    - se traslada para mantener su centro en la posición escalada respecto al pivot del grupo
- Validación dura del clipboard:
  - Se rechaza `bool`, `None`, `NaN`, `Inf`, `<=0`
  - Se loguea **1 línea** cuando se ignora una operación por valores inválidos.

Archivos:
- `rcs/ui/canvas_view.py`

### B) TextToolPanel v1 (placeholder)
- Preview **multi-línea** con `Interlineado` (multiplicador de `QFontMetricsF.lineSpacing()`).
- Modos (solo metadatos por ahora; la inserción sigue siendo placeholder):
  - `normal`
  - `plate` (incluye `outer_margin_mm`)
  - `continuous` (incluye `islands_as_engrave`, default ON)
- Output JSON actualizado con la nueva metadata.

Archivos:
- `rcs/ui/text_tool_panel.py`

### C) Toolbar “Texto”
- Se agregó una toolbar nueva “Texto” con una acción:
  - **Insertar Texto** → llama al panel de texto y dispara el placeholder (muestra el JSON en la consola/status del MainWindow según el handler existente).

Archivos:
- `rcs/ui/main_window.py`

## Checklist de pruebas manuales
### Size Paste
- Seleccionar 1 item, copiar W, pegar W → cambia solo ancho del bbox.
- Seleccionar 2+ items, pegar WxH → el bbox total queda exactamente en el tamaño objetivo.
- Con items rotados: el bbox visible debe coincidir con el tamaño pegado.
- Clipboard inválido:
  - forzar `w=True` o `w=NaN` (debug) y pegar → debe ignorar y loguear 1 línea.

### TextToolPanel
- Escribir varias líneas, variar interlineado → preview muestra líneas separadas.
- Cambiar modo:
  - `plate` habilita margen externo
  - `continuous` habilita “Islas como grabado”
- Toolbar “Insertar Texto” → dispara el mismo flujo que el botón del panel.

## Notas
- **No** se implementan aún sombras ni `seat_clearance_mm` (explícitamente fuera de alcance).
- La inserción real de texto en escena sigue pendiente: este hotfix deja el pipeline UI + metadata listo.
